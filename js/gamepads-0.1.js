function registerHostFunctions(t,l){const u=8;const m=28;const b=.04;globalThis.addEventListener(`gamepadconnected`,()=>{});t.env.getGamepads=n=>{const t=navigator.getGamepads();const e=l?l.memory:wasm_memory;const a=new Float32Array(e.buffer);const s=new Uint32Array(e.buffer);const o=new Uint8Array(e.buffer);for(const[r,i]of t.slice(0,u).entries()){let t=n+m*r+1;if(!i||!i.connected||i.mapping!=="standard"){o[t]=0;continue}o[t++]=1;o[t++]=i.buttons.length;o[t++]=i.axes.length;let e=0;for(const[c,f]of i.buttons.entries()){if(c<17&&f.pressed)e|=1<<c}s[t/4]=e;t+=4;for(const[c,d]of i.axes.slice(0,4).entries()){const g=c===1||c===3?-1:1;a[t/4]=Math.abs(d)<b?0:g*(d-Math.sign(d)*b)/(1-b);t+=4}}};t.env.playEffect=(e,t,n,a,s)=>{const o=navigator.getGamepads().find(t=>t?.index===e);o?.vibrationActuator?.playEffect("dual-rumble",{duration:t,startDelay:n,strongMagnitude:a,weakMagnitude:s})}}
